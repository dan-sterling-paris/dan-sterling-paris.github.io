<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Overview - Next 7 Days (€)</title> <!-- Updated title -->
    <style>
        /* Styles remain the same as the previous version */
        body {
            font-family: sans-serif;
            line-height: 1.6;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: 20px auto;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px; /* Reduced margin */
        }
        h2.day-label { /* Renamed for clarity, also used for Outstanding section */
             font-size: 1.1em;
             color: #444;
             margin-top: 20px;
             margin-bottom: 8px;
             border-bottom: 1px solid #eee;
             padding-bottom: 5px;
        }
        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Two equal columns */
            gap: 15px; /* Space between columns */
            margin-bottom: 15px; /* Space between rows */
            align-items: center; /* Vertically align items in the middle */
        }
        label {
            display: block; /* Make label take its own line */
            margin-bottom: 5px; /* Space below label */
            font-weight: bold;
            color: #555;
            font-size: 0.95em; /* Slightly smaller label */
        }
        input[type="text"],
        input[type="number"] {
            width: 100%; /* Make input take full width of its column */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box; /* Include padding and border in width */
        }
        /* Style adjustments for smaller screens */
        @media (max-width: 500px) {
            .input-row {
                grid-template-columns: 1fr; /* Stack columns vertically */
                gap: 5px; /* Reduce gap */
            }
             h2.day-label {
                text-align: center;
             }
            label {
                 margin-bottom: 2px; /* Reduce space below label */
            }
            input[type="text"],
            input[type="number"] {
                 margin-bottom: 10px; /* Add space below input when stacked */
            }
        }

        button {
            display: block;
            width: 100%;
            padding: 12px 20px;
            background-color: #28a745; /* Green color for email */
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 30px; /* More space before button */
            transition: background-color 0.2s ease;
        }
        button:hover {
            background-color: #218838;
        }
        .info {
            font-size: 0.9em;
            color: #666;
            text-align: center;
            margin-top: 5px; /* Reduced margin */
            margin-bottom: 25px;
        }
        hr { /* Optional: Hide hr if using h2 as separators */
             display: none;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Financial Overview</h1> <!-- Updated title -->
    <p class="info">Enter outstanding amounts owed and expected earnings in Euros (€) for each of the next 7 days. All amount fields are required (enter 0 if none). Click the button to prepare an email summary.</p> <!-- Updated info text -->
    <form id="earningsForm">

        <!-- Outstanding Amounts Owed -->
        <h2 class="day-label">Outstanding Amounts Owed</h2>
        <div class="input-row">
            <div>
                <label for="outstandingPerson">Paying Person/Entity:</label>
                <input type="text" id="outstandingPerson" name="outstandingPerson">
            </div>
            <div>
                <label for="outstandingAmount">Amount Owed (€):</label>
                <input type="number" id="outstandingAmount" name="outstandingAmount" step="0.01" placeholder="e.g., 500.00" required value="0">
            </div>
        </div>

        <!-- Day 1 -->
        <h2 class="day-label" id="dayLabel1">Day 1 Loading...</h2>
        <div class="input-row">
            <div>
                <label for="person1">Paying Person/Entity:</label>
                <input type="text" id="person1" name="person1">
            </div>
            <div>
                <label for="amount1">Expected Amount (€):</label>
                <input type="number" id="amount1" name="amount1" step="0.01" placeholder="e.g., 150.50" required value="0">
            </div>
        </div>

        <!-- Day 2 -->
        <h2 class="day-label" id="dayLabel2">Day 2 Loading...</h2>
        <div class="input-row">
            <div>
                <label for="person2">Paying Person/Entity:</label>
                <input type="text" id="person2" name="person2">
            </div>
            <div>
                <label for="amount2">Expected Amount (€):</label>
                <input type="number" id="amount2" name="amount2" step="0.01" placeholder="e.g., 100.00" required value="0">
            </div>
        </div>

        <!-- Day 3 -->
        <h2 class="day-label" id="dayLabel3">Day 3 Loading...</h2>
        <div class="input-row">
            <div>
                <label for="person3">Paying Person/Entity:</label>
                <input type="text" id="person3" name="person3">
            </div>
            <div>
                <label for="amount3">Expected Amount (€):</label>
                <input type="number" id="amount3" name="amount3" step="0.01" placeholder="e.g., 50.00" required value="0">
            </div>
        </div>

        <!-- Day 4 -->
        <h2 class="day-label" id="dayLabel4">Day 4 Loading...</h2>
        <div class="input-row">
            <div>
                <label for="person4">Paying Person/Entity:</label>
                <input type="text" id="person4" name="person4">
            </div>
            <div>
                <label for="amount4">Expected Amount (€):</label>
                <input type="number" id="amount4" name="amount4" step="0.01" placeholder="e.g., 200.00" required value="0">
            </div>
        </div>

        <!-- Day 5 -->
        <h2 class="day-label" id="dayLabel5">Day 5 Loading...</h2>
        <div class="input-row">
            <div>
                <label for="person5">Paying Person/Entity:</label>
                <input type="text" id="person5" name="person5">
            </div>
            <div>
                <label for="amount5">Expected Amount (€):</label>
                <input type="number" id="amount5" name="amount5" step="0.01" placeholder="e.g., 75.00" required value="0">
            </div>
        </div>

        <!-- Day 6 -->
        <h2 class="day-label" id="dayLabel6">Day 6 Loading...</h2>
        <div class="input-row">
            <div>
                <label for="person6">Paying Person/Entity:</label>
                <input type="text" id="person6" name="person6">
            </div>
            <div>
                <label for="amount6">Expected Amount (€):</label>
                <input type="number" id="amount6" name="amount6" step="0.01" placeholder="e.g., 120.00" required value="0">
            </div>
        </div>

        <!-- Day 7 -->
        <h2 class="day-label" id="dayLabel7">Day 7 Loading...</h2>
        <div class="input-row">
            <div>
                <label for="person7">Paying Person/Entity:</label>
                <input type="text" id="person7" name="person7">
            </div>
            <div>
                <label for="amount7">Expected Amount (€):</label>
                <input type="number" id="amount7" name="amount7" step="0.01" placeholder="e.g., 90.00" required value="0">
            </div>
        </div>

        <button type="submit">Prepare Financial Summary Email (€)</button> <!-- Updated button text -->
    </form>
</div>

<script>
    const form = document.getElementById('earningsForm');

    // --- IMPORTANT: Set YOUR email address here ---
    const recipientEmail = "dan@sterlingparis.com"; // <--- CHANGE THIS!
    // ---

    const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

    function formatDate(date) {
        const dayOfWeek = dayNames[date.getDay()];
        const dayOfMonth = String(date.getDate()).padStart(2, '0');
        const month = monthNames[date.getMonth()];
        const year = String(date.getFullYear()).slice(-2);
        return `${dayOfWeek}, ${dayOfMonth} ${month} ${year}`;
    }

    function addDays(date, days) {
        const result = new Date(date);
        result.setDate(result.getDate() + days);
        return result;
    }

    const today = new Date();
    const dayDates = [];
    const dayLabelsFormatted = [];

    for (let i = 0; i < 7; i++) {
        const currentDate = addDays(today, i);
        dayDates.push(currentDate);
        const formattedDate = formatDate(currentDate);
        dayLabelsFormatted.push(formattedDate);

        const labelElement = document.getElementById(`dayLabel${i + 1}`);
        if (labelElement) {
            labelElement.textContent = formattedDate;
        }
    }


    form.addEventListener('submit', function(event) {
        event.preventDefault();

        const startDateFormatted = dayLabelsFormatted[0];
        let emailBody = `Financial Summary Report\n`;
        emailBody += `Week Starting: ${startDateFormatted}\n\n`;

        let totalOutstanding = 0;
        let totalUpcoming = 0;
        let overallDataEntered = false; // To check if any meaningful data was entered

        // --- Process Outstanding Amounts ---
        const outstandingPersonInput = document.getElementById('outstandingPerson');
        const outstandingAmountInput = document.getElementById('outstandingAmount');

        const outstandingPerson = outstandingPersonInput.value.trim();
        const outstandingAmountStr = outstandingAmountInput.value.trim(); // Will be '0' by default if not changed
        const outstandingAmount = parseFloat(outstandingAmountStr);

        if (outstandingPerson || outstandingAmount !== 0) {
            overallDataEntered = true;
            emailBody += `--- OUTSTANDING AMOUNTS OWED ---\n`;
            emailBody += `  Paying Person/Entity: ${outstandingPerson || '(Not specified)'}\n`;
            const outstandingAmountDisplay = new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(outstandingAmount);
            emailBody += `  Amount Owed: ${outstandingAmountDisplay}\n`;
            emailBody += `----------------------------------------\n\n`;
            totalOutstanding += outstandingAmount;
        }

        // --- Process Upcoming Earnings (Next 7 Days) ---
        let upcomingEarningsBody = "";
        let upcomingDataEntered = false;

        for (let i = 1; i <= 7; i++) {
            const personInput = document.getElementById(`person${i}`);
            const amountInput = document.getElementById(`amount${i}`);
            const dayLabel = dayLabelsFormatted[i - 1];

            const person = personInput.value.trim();
            const amountStr = amountInput.value.trim(); // Will be '0' by default if not changed
            const amount = parseFloat(amountStr);

            if (person || amount !== 0) {
                upcomingDataEntered = true;
                overallDataEntered = true;

                upcomingEarningsBody += `${dayLabel}\n`;
                upcomingEarningsBody += `  Paying Person/Entity: ${person || '(Not specified)'}\n`;
                const amountDisplay = new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(amount);
                upcomingEarningsBody += `  Expected Amount: ${amountDisplay}\n`;
                upcomingEarningsBody += `----------------------------------------\n`;
                totalUpcoming += amount;
            }
        }

        if (upcomingDataEntered) {
            emailBody += `--- UPCOMING EARNINGS (Next 7 Days) ---\n`;
            emailBody += upcomingEarningsBody;
            emailBody += `\n`;
        }

        if (!overallDataEntered) {
            alert("Please enter some financial information (outstanding or upcoming). All amounts were 0 and no persons/entities specified.");
            return;
        }

        // --- Summary Section ---
        emailBody += `--- TOTALS ---\n`;
        const totalOutstandingDisplay = new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(totalOutstanding);
        emailBody += `Total Outstanding: ${totalOutstandingDisplay}\n`;

        const totalUpcomingDisplay = new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(totalUpcoming);
        emailBody += `Total Upcoming Earnings (Next 7 Days): ${totalUpcomingDisplay}\n`;

        const grandTotal = totalOutstanding + totalUpcoming;
        const grandTotalDisplay = new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(grandTotal);
        emailBody += `GRAND TOTAL (Outstanding + Upcoming): ${grandTotalDisplay}\n`;


        const subject = `Financial Summary (€) - Week starting ${startDateFormatted}`;
        const mailtoLink = `mailto:${recipientEmail}`
                         + `?subject=${encodeURIComponent(subject)}`
                         + `&body=${encodeURIComponent(emailBody)}`;

        window.location.href = mailtoLink;
        alert("Your email application should now open with the financial summary pre-filled. Please review and press 'Send'.");

        // form.reset(); // This will reset amount fields to their initial "0" value
    });
</script>

</body>
</html>
